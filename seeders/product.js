import mongoose from "mongoose";
import dotenv from "dotenv";
import connectDB from "../config/db.js";
import Product from "../models/product.models.js";

dotenv.config();

const productsData = [
  // Out of Stock Products (for Stock Alerts)
  {
    name: "Grey Goose Vodka",
    category: "Vodka",
    brand: "Grey Goose",
    price: 42.99,
    discountPercent: 0,
    stock: 0,
    rating: 4.7,
    alcoholPercentage: 40,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: false,
    totalSold: 312,
    reviewCount: 234,
  },
  {
    name: "Moet & Chandon",
    category: "Champagne",
    brand: "Moet & Chandon",
    price: 59.99,
    discountPercent: 0,
    stock: 0,
    rating: 4.6,
    alcoholPercentage: 12,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: false,
    totalSold: 198,
    reviewCount: 167,
  },
  
  // Low Stock Products (for Stock Alerts - going out of stock soon)
  {
    name: "Hennessy XO",
    category: "Cognac",
    brand: "Hennessy",
    price: 229.99,
    discountPercent: 15,
    stock: 8,
    rating: 4.8,
    alcoholPercentage: 40,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: true,
    totalSold: 45,
    reviewCount: 98,
  },
  {
    name: "Macallan 18 Year",
    category: "Whiskey",
    brand: "Macallan",
    price: 349.99,
    discountPercent: 0,
    stock: 5,
    rating: 5.0,
    alcoholPercentage: 43,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: true,
    totalSold: 34,
    reviewCount: 89,
  },
  {
    name: "Chivas Regal 18",
    category: "Whiskey",
    brand: "Chivas Regal",
    price: 129.99,
    discountPercent: 12,
    stock: 7,
    rating: 4.7,
    alcoholPercentage: 40,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: false,
    totalSold: 78,
    reviewCount: 92,
  },
  {
    name: "Patron Silver",
    category: "Tequila",
    brand: "Patron",
    price: 89.99,
    discountPercent: 8,
    stock: 6,
    rating: 4.6,
    alcoholPercentage: 40,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: false,
    totalSold: 112,
    reviewCount: 134,
  },
  
  // Top Sellers (High Sales)
  {
    name: "Captain Morgan Spiced",
    category: "Rum",
    brand: "Captain Morgan",
    price: 19.99,
    discountPercent: 10,
    stock: 89,
    rating: 4.3,
    alcoholPercentage: 35,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1551538827-9c037cb4f32a?w=400",
    isRecommended: false,
    totalSold: 567,
    reviewCount: 456,
  },
  {
    name: "Bombay Sapphire",
    category: "Gin",
    brand: "Bombay Sapphire",
    price: 28.99,
    discountPercent: 20,
    stock: 67,
    rating: 4.5,
    alcoholPercentage: 47,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608270586620-248524c67de9?w=400",
    isRecommended: false,
    totalSold: 423,
    reviewCount: 312,
  },
  
  // Recommended Products (High Rating + Recommended)
  {
    name: "Don Julio 1942",
    category: "Tequila",
    brand: "Don Julio",
    price: 159.99,
    discountPercent: 5,
    stock: 32,
    rating: 4.9,
    alcoholPercentage: 40,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: true,
    totalSold: 156,
    reviewCount: 187,
  },
  {
    name: "Johnnie Walker Blue Label",
    category: "Whiskey",
    brand: "Johnnie Walker",
    price: 189.99,
    discountPercent: 10,
    stock: 24,
    rating: 4.9,
    alcoholPercentage: 40,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: true,
    totalSold: 89,
    reviewCount: 156,
  },
  {
    name: "Dom Perignon",
    category: "Champagne",
    brand: "Dom Perignon",
    price: 249.99,
    discountPercent: 0,
    stock: 15,
    rating: 4.8,
    alcoholPercentage: 12.5,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: true,
    totalSold: 67,
    reviewCount: 89,
  },
  {
    name: "Glenfiddich 21 Year",
    category: "Whiskey",
    brand: "Glenfiddich",
    price: 299.99,
    discountPercent: 5,
    stock: 18,
    rating: 4.9,
    alcoholPercentage: 40,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: true,
    totalSold: 56,
    reviewCount: 78,
  },
  
  // Products with Various Discounts/Offers
  {
    name: "Jack Daniel's",
    category: "Whiskey",
    brand: "Jack Daniel's",
    price: 29.99,
    discountPercent: 5,
    stock: 45,
    rating: 4.4,
    alcoholPercentage: 40,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: false,
    totalSold: 234,
    reviewCount: 189,
  },
  {
    name: "Absolut Vodka",
    category: "Vodka",
    brand: "Absolut",
    price: 24.99,
    discountPercent: 8,
    stock: 56,
    rating: 4.2,
    alcoholPercentage: 40,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: false,
    totalSold: 178,
    reviewCount: 145,
  },
  {
    name: "Bacardi Superior",
    category: "Rum",
    brand: "Bacardi",
    price: 18.99,
    discountPercent: 15,
    stock: 72,
    rating: 4.1,
    alcoholPercentage: 40,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: false,
    totalSold: 298,
    reviewCount: 201,
  },
  {
    name: "Tanqueray London Dry",
    category: "Gin",
    brand: "Tanqueray",
    price: 32.99,
    discountPercent: 12,
    stock: 48,
    rating: 4.4,
    alcoholPercentage: 47.3,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: false,
    totalSold: 156,
    reviewCount: 123,
  },
  {
    name: "Jameson Irish Whiskey",
    category: "Whiskey",
    brand: "Jameson",
    price: 34.99,
    discountPercent: 0,
    stock: 62,
    rating: 4.3,
    alcoholPercentage: 40,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: false,
    totalSold: 201,
    reviewCount: 167,
  },
  {
    name: "Ketel One Vodka",
    category: "Vodka",
    brand: "Ketel One",
    price: 39.99,
    discountPercent: 10,
    stock: 38,
    rating: 4.5,
    alcoholPercentage: 40,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: false,
    totalSold: 134,
    reviewCount: 98,
  },
  {
    name: "Ciroc Vodka",
    category: "Vodka",
    brand: "Ciroc",
    price: 44.99,
    discountPercent: 18,
    stock: 41,
    rating: 4.6,
    alcoholPercentage: 40,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: false,
    totalSold: 98,
    reviewCount: 76,
  },
  {
    name: "Remy Martin VSOP",
    category: "Cognac",
    brand: "Remy Martin",
    price: 79.99,
    discountPercent: 0,
    stock: 28,
    rating: 4.7,
    alcoholPercentage: 40,
    volume: "750ml",
    imageUrl: "https://images.unsplash.com/photo-1608848942187-4d1c8a3e4b3a?w=400",
    isRecommended: false,
    totalSold: 87,
    reviewCount: 112,
  },
];

// Calculate discountAmount and finalPrice for each product
const products = productsData.map((product) => {
  const discountAmount = (product.price * product.discountPercent) / 100;
  const finalPrice = product.price - discountAmount;
  return {
    ...product,
    discountAmount: Math.round(discountAmount * 100) / 100,
    finalPrice: Math.round(finalPrice * 100) / 100,
  };
});

const seedProducts = async () => {
  try {
    await connectDB();

    // Clear existing data
    await Product.deleteMany();

    // Insert products (discountAmount and finalPrice will be auto-calculated)
    const insertedProducts = await Product.insertMany(products);

    console.log(`✅ ${insertedProducts.length} products seeded successfully!`);
    process.exit();
  } catch (error) {
    console.error("❌ Seeding failed:", error);
    process.exit(1);
  }
};

seedProducts();
